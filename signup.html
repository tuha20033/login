<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
   <link rel="stylesheet" href="./fontawesome-free-6.2.1-web/css/all.min.css">
    <link rel="stylesheet" href="./style1.css"> 
    <link rel="stylesheet" href="./reponsive.css">
</head>
<body>
    <div class="wrapper">
        <form action="">
            <h1>Sign up</h1>

            <div class="input-box"> 
               
                <input type="text" name="" id="user" placeholder="User" required minlength="5" maxlength="20">
                <i class="fa-solid fa-user user icon "></i>
            </div>

            <div class="input-box"> 
               
                <input type="text" name="" id="flname" placeholder="first and last name" required minlength="8" maxlength="50">
                <i class="fa-solid fa-user user icon "></i>
            </div>

            <div class="input-box"> 
                <input type="email" name="" id="email"  placeholder="Email" required minlength="">
                <i class="fa-solid fa-envelope"></i>
            </div class=btn-box>

            <div class="input-box"> 
                <input type="password" name="" id="password" placeholder="Password" required minlength="6" maxlength="20">
                <span class="lock-icon">
                <i class="fa-solid fa-lock lock" id="icon"></i>
               
            </span>
                
            </div>  
            
            <div class="input-box"> 
                <input type="password" name="" id="password2" placeholder="Confirm password" required >
                <span class="lock-icon">
                <i class="fa-solid fa-lock lock" id="icon1"></i>
                
            </span>
                
            </div>
            <div class="input-box"> 
                <input type="tel" name="" id="phone" placeholder="Phone"  required maxlength="10" >
                <i class="fa-solid fa-phone"></i>
            </div>
            <div class="input-box"> 
                <input type="text" name="" id="adress" placeholder="adress" required maxlength="100">
                <i class="fa-solid fa-map-location"></i>
            </div>
              <button class="btn" type="submit" id="btn-signup">Sign up</button>
          
        </form>
    </div>
    <script>

   
    var btn = document.getElementById('btn-signup')
        btn.onclick = function(){
             const user = document.getElementById('user');
             const flname = document.getElementById('flname');
             const email = document.getElementById('email');
             const password = document.getElementById('password');
             const password2 = document.getElementById('password2');
             const phone = document.getElementById('phone');
             const phone_check = document.getElementById('phone').value;
             const regex = /!@#$%^&*(),.?":{}|<>]/;
            const adress = document.getElementById('adress')

            if((flname.value.length<8)&&(flname.value.length>50)){
                    // a.style.display="block"
                    alert(" họ và tên không hợp lệ");
                  
                }
                else if((user.value.length<5)&&(user.value.length>20)){
                    alert(" user không hợp lệ , phải trên 5 ký tự và dưới 20 ký tự");
                    // b.style.display="block"
                  
                }
                else if((password.value.length<6)&&((password.value.length>20))){
                    alert("Mật khẩu không hợp lệ ,phải trên 6 ký tự dưới 20 ký tự");
                    // c.style.display="block"
                 
                }
                else if(password.value.length!=password2.value.length){
                    alert("Mật khẩu không giống nhau");
                    
                    // d.style.display="block"
                }
            var a = document.getElementById('a')
           var b = document.getElementById('b')
           var c = document.getElementById('c')
           var d = document.getElementById('d')
            var e = document.getElementById('e')
           
                var flag = false;
                if((flname.value.length>=8)
                &&(flname.value.length<=50)
                &&(user.value.length>=5)
                &&(user.value.length<=20)
                &&(password.value.length>=6)
                &&(password.value.length<=20)
                &&(password.value==password2.value)
                &&(adress.value.length<=100)
                &&(!regex.test(phone_check)&&(phone_check.charAt(1)==3||phone_check.charAt(1)==9)&&(phone_check.charAt(0)==0)&&(phone_check.length==10))
                )
                {flag=true};
                
                if(flag==true){
                    user_data= user.value;
                    localStorage.setItem("user",user_data) ;
                    email_data= email.value;
                    localStorage.setItem("email",email_data);
                    flname_data = flname.value;
                    localStorage.setItem("flname",flname_data );
                    phone_data= phone.value;
                    localStorage.setItem("phone",phone_data);
                    adress_data= adress.value;
                    localStorage.setItem("adress",adress_data);
                    password_data = password.value;
                    localStorage.setItem("password", password_data);
                    alert('Đăng ký thành công hệ thống sẽ đưa bạn đến trang đăng nhập ')
                    window.open('./login.html')
                }
               
                else  {alert("Đăng ký không thành công xin vui lòng thử lại ");}
            var itemName  = localStorage.getItem('productlist') ? JSON.parse(localStorage.getItem('productlist')) : [];
            if((flname.value.length>=8)
                &&(flname.value.length<=50)
                &&(user.value.length>=5)
                &&(user.value.length<=20)
                &&(password.value.length>=6)
                &&(password.value.length<=20)
                &&(password.value==password2.value)
                &&(adress.value.length<=100)
                &&(!regex.test(phone_check)&&(phone_check.charAt(1)==3||phone_check.charAt(1)==9)&&(phone_check.charAt(0)==0)&&(phone_check.length==10))
                ){ 
                    let object = {
                user:user.value,
                password:password.value,
                email:email.value,
                flname:flname.value,
                phone:phone.value,
                adress:adress.value,
                 }
           var  itemName  = localStorage.getItem('productlist') ? JSON.parse(localStorage.getItem('productlist')) : [];
                var productlist =localStorage.getItem('productlist');
                if(productlist){
                 itemName  = JSON.parse(productlist);
                itemName.push(object);
                localStorage.setItem("productlist",JSON.stringify(itemName))
                }
                else{
                localStorage.setItem("productlist",JSON.stringify([object]))
                }
    }

  
        }
            // ẩn hiên mật khẩu input
    var password_iocn1 = document.getElementById('password');
      
      var icon= document.getElementById('icon');
      icon.addEventListener("click",function(){
        if (password_iocn1.type === 'password')
         {
              password_iocn1.type = 'text';
              
  } else {
              password_iocn1.type = 'password';
             
  }
      })
     var password_icon = document.getElementById('password2');
      var icon1= document.getElementById('icon1');
      icon1.addEventListener("click",function(){
        if (password_icon.type === 'password')
         {
              password_icon.type = 'text';
              
  } else {
              password_icon.type = 'password';
             
  }
      })
      </script>

      <div class="toast_body " id="a">
        <p>họ và tên không hợp lệ</p>
        <i class="fa-solid fa-x"></i>
      </div>
      <div class="toast_body b " id="b">
        <p> user không hợp lệ , <br>phải trên 5 ký tự và dưới 20 ký tự</p>
        <i class="fa-solid fa-x"></i>
      </div>
      <div class="toast_body c" id="c">
       <p>Mật khẩu không hợp lệ ,<br>phải trên 6 ký tự dưới 20 ký tự</p> 
       <i class="fa-solid fa-x"></i>
      </div>
      <div class="toast_body d" id =d>
       <p> "Mật khẩu không giống nhau</p>
       <i class="fa-solid fa-x"></i>
      </div>
      <div class="toast_body e" id =e>
       <p>địa chỉ không hợp lệ</p>  
       <i class="fa-solid fa-x"></i>

    
</div>
</body>

</html>    
